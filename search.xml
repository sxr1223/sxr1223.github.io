<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/post/fd35effcd24e/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start">Quick Start</h2>
<h3 id="Create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>SQLCipher-Password-Cracker-OpenCL使用记录</title>
    <url>/post/747054a76dee/</url>
    <content><![CDATA[<p>很麻烦，真的很麻烦</p>
<h2 id="pip-安装"><code>pip</code> 安装</h2>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">pip install pysqlcipher</span><br></pre></td></tr></table></figure>
<p>不过这个方法多半是行不通的</p>
<h2 id="手动安装">手动安装</h2>
<p>原版项目地址：<a href="https://github.com/chg-hou/EnMicroMsg.db-Password-Cracker">GitHub - EnMicroMsg.db-Password-Cracker</a><br>
其中 <a href="https://github.com/chg-hou/EnMicroMsg.db-Password-Cracker/issues/10">issue: CUDA version completed but won’t release</a> 中出现了一个 OpenCL 显卡加速版项目，地址为：<a href="https://github.com/whiteblackitty/SQLCipher-Password-Cracker-OpenCL">GitHub - whiteblackitty/SQLCipher-Password-Cracker-OpenCL: Password cracker for SQLCipher v2 using OpenCL</a><br>
以下方法均基于 OpenCL 显卡加速版项目进行</p>
<h2 id="下载项目与安装依赖项">下载项目与安装依赖项</h2>
<h3 id="克隆仓库">克隆仓库</h3>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/whiteblackitty/SQLCipher<span class="literal">-Password-Cracker-OpenCL</span>.git</span><br><span class="line"></span><br><span class="line">git clone </span><br></pre></td></tr></table></figure>
<h3 id="修改项目文件">修改项目文件</h3>
<p>对于 <code>SQLCipher-Password-Cracker-OpenCL</code> 项目</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line"># /SQLCipher-Password-Cracker-OpenCL/Lib/opencl.py</span><br><span class="line">`np.bool` --&gt; `bool` </span><br><span class="line"># numpy新版本中删除了`np.bool`，推荐使用python内建类型`bool`</span><br><span class="line"></span><br><span class="line"># /SQLCipher-Password-Cracker-OpenCL/run.py, line 43</span><br><span class="line">`passphrase+=chr(pword)` --&gt; `passphrase+=chr(int(pword[0]))`</span><br><span class="line"># python3.8及以后版本的python语法变更</span><br><span class="line"></span><br><span class="line"># /SQLCipher-Password-Cracker-OpenCL/Lib/pbkdf2-sha1_aes-256-cbc.cl, line 752</span><br><span class="line">``</span><br><span class="line">--&gt;</span><br><span class="line">`if(((uint)(data[5] ^ iv[5])==0x40) &amp;&amp; ((uint)(data[6] ^ iv[6])==0x20) &amp;&amp; ((uint)(data[7] ^ iv[7])==0x20))`</span><br></pre></td></tr></table></figure>
<h2 id="安装环境">安装环境</h2>
<h3 id="安装-CUDA-与-cuDNN">安装 CUDA 与 cuDNN</h3>
<p>见网上教程</p>
<h3 id="安装-OpenCL-SDK">安装 OpenCL SDK</h3>
<p>Intel 官网下载<br>
<a href="https://www.intel.com/content/www/us/en/developer/tools/opencl-sdk/overview.html">Intel 官网</a><br>
不清楚这个是什么<br>
<a href="https://github.com/KhronosGroup/OpenCL-SDK">GitHub - KhronosGroup/OpenCL-SDK: OpenCL SDK</a></p>
<h2 id="编译-SQLCipher">编译 <code>SQLCipher</code></h2>
<p>参见：<a href="https://github.com/sqlitebrowser/sqlitebrowser/wiki/Win64-setup-%E2%80%94-Compiling-SQLCipher">Win64 setup — Compiling SQLCipher · sqlitebrowser/sqlitebrowser Wiki · GitHub</a>，现简单记录如下。</p>
<p>该步骤貌似并不是必须，最后产生的文件可能可以使用 <a href="https://sqlite.org/download.html"><code>sqlite-amalgamation</code></a> 中的文件代替。</p>
<h3 id="安装-VS">安装 VS</h3>
<p>VS 版本≥VS2013<br>
选择 <code>使用C++的桌面应用开发</code>，需要勾选 <code>Windows 10 SDK</code>、<code>MSVC</code>、<code>C++ ATL</code>。<br>
其中 <code>Windows 10 SDK</code> 安装位置由 <code>\HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows Kits\Installed Roots\</code> 的字符串 <code>KitsRoot10</code> 指定</p>
<h3 id="安装-ActiveTcl">安装 ActiveTcl</h3>
<p><a href="https://www.activestate.com/activetcl/downloads">ActiveTcl</a></p>
<h3 id="安装-OpenSSL">安装 OpenSSL</h3>
<p>选择 <code>The OpenSSL binaries (/bin) directory</code><br>
安装完毕后需手动添加环境变量（用户变量即可）<code>OPENSSL_CONF</code>，地址为 <code>&lt;OPENSSLDIR&gt;\OpenSSL-Win64\bin\openssl.cfg</code></p>
<h3 id="配置环境变量">配置环境变量</h3>
<p>由于编译 SQLCipher 通过命令行使用 <code>nmake</code>，头文件和库文件搜索目录全部从环境变量中指定。</p>
<p>向系统变量中添加 <code>LIB</code>，路径为 <code>&lt;WIN10_SDK&gt;\Lib\10.0.20348.0\um\x64;&lt;WIN10_SDK&gt;\Lib\10.0.20348.0\ucrt\x64;&lt;VS_PATH&gt;\VC\Tools\MSVC\14.36.32532\lib\x64;</code></p>
<p>向系统变量中添加 <code>INCLUDE</code>，路径为 <code>&lt;VS_PATH&gt;\VC\Tools\MSVC\14.36.32532\include;&lt;WIN10_SDK&gt;\Include\10.0.20348.0\shared;&lt;WIN10_SDK&gt;\Include\10.0.20348.0\ucrt;&lt;WIN10_SDK&gt;\Include\10.0.20348.0\um;&lt;WIN10_SDK&gt;\Include\10.0.20348.0\winrt;</code></p>
<h3 id="编译-SQLCipher-2">编译 SQLCipher</h3>
<p>克隆 SQLCipher</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/sqlcipher/sqlcipher.git</span><br><span class="line"><span class="built_in">cd</span> ./sqlcipher</span><br></pre></td></tr></table></figure>
<p>可能还需要将 <code>nmake</code> 和 <code>rc</code> 添加至环境变量 <code>PATH</code>，路径为 <code>&lt;VS_PATH&gt;\VC\Tools\MSVC\14.36.32532\bin\Hostx64\x64;&lt;WIN10_SDK&gt;\bin\10.0.20348.0\x64</code></p>
<p>进行编译</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">nmake /f Makefile.msc clean</span><br><span class="line">nmake /f Makefile.msc</span><br></pre></td></tr></table></figure>
<p>这里多半会报错，但是只要生成了 <code>sqlite3.c</code> 和 <code>sqlite3.h</code> 即可</p>
<h2 id="编译-pysqlcipher">编译 <code>pysqlcipher</code></h2>
<h3 id="克隆-pysqlcipher">克隆 <code>pysqlcipher</code></h3>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/rigglemania/pysqlcipher3.git</span><br><span class="line"><span class="built_in">cd</span> ./pysqlcipher</span><br></pre></td></tr></table></figure>
<h3 id="编译-amalgamation">编译 <code>amalgamation</code></h3>
<p>新建文件夹 <code>pysqlcipher/amalgamation/</code>，将 <code>sqlite3.c</code> 和 <code>sqlite3.h</code> 复制到 <code>pysqlcipher/amalgamation/</code> 中。</p>
<p>下载 <a href="https://sqlite.org/download.html"><code>sqlite-amalgamation</code></a>，解压至 <code>pysqlcipher3/src/python3/sqlcipher</code> 中。</p>
<p>由于 python 版本变化，修改 <code>pysqlcipher3\src\python3</code> 中的源文件，将 <code>MODULE_NAME</code> 替换为 <code>&quot;pysqlcipher3.dbapi2&quot;</code><br>
否则会产生以下报错</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">src\python3\cache.c(261): </span><br><span class="line">error C2017: illegal escape sequence</span><br><span class="line">error C2061: syntax error: identifier &#x27;Node&#x27;</span><br><span class="line">error C2001: newline in constant</span><br><span class="line">error C2224: left of &#x27;.Cache&#x27; must have struct/union type</span><br><span class="line">error: command &#x27;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX86\\x64\\cl.exe&#x27; failed with exit code 2&quot;</span><br></pre></td></tr></table></figure>
<p>之后即可进行编译</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ./pysqlcipher/</span><br><span class="line">python setup.py clean</span><br><span class="line">python setup.py build_amalgamation</span><br></pre></td></tr></table></figure>
<h3 id="编译-pysqlcipher-2">编译 <code>pysqlcipher</code></h3>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">python setup.py install </span><br></pre></td></tr></table></figure>
<h3 id="验证">验证</h3>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">python</span><br><span class="line">import pysqlcipher3 <span class="comment"># 不报错就代表安装成功</span></span><br></pre></td></tr></table></figure>
<h2 id="SQLCipher-Password-Cracker-OpenCL-使用"><code>SQLCipher-Password-Cracker-OpenCL</code> 使用</h2>
<p>项目库中的源码经过修改后即可直接使用了，将数据库放在 <code>/SQLCipher-Password-Cracker-OpenCL/</code> 下，然后修改 <code>Run.py</code> 中数据库的名称后就可以运行了</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">python Run.py <span class="comment"># 如果显卡（包含集显）不止一张，需要指定显卡编号</span></span><br><span class="line">python Run.py <span class="number">0</span> <span class="comment"># 指定显卡编号</span></span><br></pre></td></tr></table></figure>
<h2 id="工具版本记录">工具版本记录</h2>
<p>我没有特意使用资料中的版本，而是选择最新版本，侥幸安装成功<br>
python3.11.3<br>
Win64OpenSSL-3_1_1<br>
ActiveTcl-8.6.13.0000-MSWin32-x64-559160e0.msi<br>
gowxdump-master-934a12de5f8febcb4d1f69d4f4c7fe6217d7df93.zip<br>
pysqlcipher3-1.2.0.tar.gz<br>
sqlcipher-4.5.4.zip<br>
sqlite-amalgamation-3420000.zip</p>
<h3 id="参考文献">参考文献</h3>
<p><a href="https://stackoverflow.com/questions/61718992/install-pysqlcipher3-windows#:~:text=Install%20tlc">python - Install pysqlcipher3 windows - Stack Overflow</a><br>
<a href="https://github.com/Monogi/pysqlcipher3_install_win10">GitHub - Monogi/pysqlcipher3_install_win10</a><br>
<a href="https://blog.csdn.net/orange_xiang/article/details/95771893">win10 Python3安装pysqlcipher3的问题总结_no module named 'pysqlcipher3_orange_xiang的博客-CSDN博客</a><br>
<a href="https://github.com/sqlitebrowser/sqlitebrowser/wiki/Win64-setup-%E2%80%94-Compiling-SQLCipher">Win64 setup — Compiling SQLCipher · sqlitebrowser/sqlitebrowser Wiki · GitHub</a><br>
<a href="https://www.zhihu.com/question/20443317/answer/1127118621">在微信，如何导出自己和朋友的聊天记录？ - 知乎</a><br>
<a href="https://github.com/whiteblackitty/SQLCipher-Password-Cracker-OpenCL/tree/master">GitHub - whiteblackitty/SQLCipher-Password-Cracker-OpenCL: Password cracker for SQLCipher v2 using OpenCL</a><br>
<a href="https://www.zybuluo.com/caipiz/note/1396788">编译Windows 64bit平台pysqlcipher3 for Python3.7 - 作业部落 Cmd Markdown 编辑阅读器</a><br>
<a href="https://cloud.tencent.com/developer/ask/sof/115787402">安装pysqlcipher3时出现问题 - 问答 - 腾讯云开发者社区-腾讯云</a></p>
]]></content>
      <categories>
        <category>微信数据导出</category>
      </categories>
      <tags>
        <tag>微信</tag>
        <tag>python</tag>
        <tag>CS</tag>
      </tags>
  </entry>
  <entry>
    <title>微信数据导出-ADB</title>
    <url>/post/400420378f39/</url>
    <content><![CDATA[<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 需在模拟器设置中打开root和ADB，一般重启后生效</span></span><br><span class="line">adb connect <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2333</span> <span class="comment"># ip和端口直接用模拟器设置中给的即可</span></span><br><span class="line"></span><br><span class="line">adb devices <span class="comment"># 查询当前ADB连接的设备</span></span><br><span class="line"></span><br><span class="line">adb pull <span class="literal">-s</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2333</span> &lt;source_path&gt; &lt;destine_path&gt;</span><br><span class="line"><span class="comment"># `-s`参数指定设备序列号，也就是`adb devices`中显示的名称，若只有一台设备连接可省略</span></span><br><span class="line"><span class="comment"># `-d`参数代表选择设备（Device），`-e`参数代表选择模拟器（Emulator），用于有且只有一台设备和一台模拟器连接到ADB</span></span><br><span class="line"></span><br><span class="line">adb shell <span class="comment">#进入ADB的交互式界面</span></span><br></pre></td></tr></table></figure>
<h4 id="adb-pull-报错-Permission-denied"><code>adb pull</code> 报错 <code>Permission denied</code></h4>
<p>先复制到 <code>/sdcard/</code> 后再 <code>adb pull</code></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span>  &lt;source_path&gt; /sdcard/</span><br><span class="line">adb pull &lt;source_path&gt; &lt;destine_path&gt;</span><br></pre></td></tr></table></figure>
<h4 id="error-more-than-one-device-emulator"><code>error: more than one device/emulator</code></h4>
<p>有多个设备同时连接 ADB，需要指定设备</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">adb <span class="literal">-s</span> &lt;SerialNumber&gt; shell <span class="comment"># 或者其他命令</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>微信数据导出</category>
      </categories>
      <tags>
        <tag>CS</tag>
        <tag>ADB</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>微信数据导出-整体框架</title>
    <url>/post/18c1db9d901b/</url>
    <content><![CDATA[<p>既可以从电脑端获取数据，也可以从手机端获取数据</p>
<h3 id="手机端">手机端</h3>
<h4 id="准备数据库">准备数据库</h4>
<p>手机端微信聊天数据存储在 <code>/data/data/com.tencent.mm/MicroMsg/&#123;hash&#125;/EnMicroMsg.db</code>，需要有 root 权限或者腾讯开发用户。因此最简单的方法就是将数据备份至一台有 root 权限的安卓设备中。</p>
<p>注意，微信设计相当糟糕，从手机备份至电脑的数据一般存放在 <code>C:\Users\&#123;UserName&#125;\Documents\WeChat Files\&#123;wxid&#125;\BackupFiles\</code>，电脑微信无法访问其中的数据，只能通过备份还原至手机微信后才可通过手机微信读取其中的信息。其次，电脑微信和手机微信中数据往往都存在一定程度的缺失（用户消息全存本地真是鬼才设计），需要综合两者才能得到比较完整的聊天记录，可以通过电脑微信的 <code>迁移</code> 功能将数据合并至手机。</p>
<p>关于有 root 权限的安卓设备，这里推荐安卓模拟器。即便是有 root 后的手机也推荐使用模拟器，因为模拟器中的手机微信和电脑微信之间传输数据全部都是在本机完成，速度相当快，特别是体验过微信那龟速备份后就更是如此。以我为例，最大速度甚至能跑到 23MB/s，这可是用 wifi 难以企及。</p>
<p>关于微信的备份，电脑微信无法选择将备份还原至哪个设备，因此需要在手机微信上退出登录后再进行还原。</p>
<h4 id="提取数据库">提取数据库</h4>
<h5 id="有-root-权限">有 root 权限</h5>
<p>有 root 权限就比较简单，直接去那个目录复制到电脑即可。<br>
但我使用的模拟器即便是开了 root 在自带的文件管理器中也无法找到那个目录，因此需要使用 ADB，ADB 功能繁多，这里只简单记录一下用到的命令。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 需在模拟器设置中打开root和ADB，一般重启后生效</span></span><br><span class="line">adb connect <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2333</span> <span class="comment"># ip和端口直接用模拟器设置中给的即可</span></span><br><span class="line"></span><br><span class="line">adb devices <span class="comment"># 查询当前ADB连接的设备</span></span><br><span class="line"></span><br><span class="line">adb pull <span class="literal">-s</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">2333</span> &lt;source_path&gt; &lt;destine_path&gt;</span><br><span class="line"><span class="comment"># `-s`参数指定设备名称，也就是`adb devices`中显示的名称，若只有一台设备连接可省略</span></span><br></pre></td></tr></table></figure>
<p>但是我在 <code>adb pull</code> 时出现 <code>permission denied</code>，需要一些额外操作。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">adb shell <span class="comment">#进入ADB的交互式界面</span></span><br><span class="line"></span><br><span class="line">su <span class="comment"># 当前会话取得root权限，提示符`$`应该会变为`#`，未变说明设备未root或者其他错误</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span>  &lt;source_path&gt; &lt;destine_path&gt;</span><br><span class="line"><span class="comment">#可以先复制到`/sdcard/`中，然后再使用`adb pull`</span></span><br></pre></td></tr></table></figure>
<h5 id="无-root-权限">无 root 权限</h5>
<p>使用手机的备份功能，将备份文件解密后即可获取，具体可参见另一篇文章 <a href="../../%E5%BE%AE%E4%BF%A1%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA/%E5%BE%AE%E4%BF%A1%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA-%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86.md">微信数据导出-备份数据解密</a></p>
<h4 id="获取密码">获取密码</h4>
<p>微信数据库密码的生成方式，是手机的 IMEI 号码与微信 uin 拼接起来之后的 MD5 值的前 7 位， MD5 取小写字母</p>
<p>IMEI 可通过手机拨号 <code>*#06#</code> 查看，每个卡槽一个 IMEI （取前 14 位），每部手机一个 MEID。但生成密码所用的 IMEI 不一定是当前手机的，有说法是注册时手机的 IMEI，也有说用 EMID<br>
微信 uin 可以从 <code>/data/data/com.tencent.mm/shared_prefs/auth_info_key_prefs.xml</code> 中 <code>&lt;int name=&quot;_auth_uin&quot; value=&quot;uid&quot; /&gt;</code> 获取，据说 <code>\com.tencent.mm\sp\system_config_prefs.xml</code> 也有，但是我没找到</p>
<p>但这个方法我一直都没成功，不知是不是真的 IMEM 不对<br>
一些相关的文章已保存至 [[破解相关文章]]，可供研究</p>
<h4 id="破解密码">破解密码</h4>
<p>推荐使用该方法，因为密码长度为 7 位，太短了。即便是 3050 跑暴力破解也不需要半小时。<br>
使用 SQLCipher-Password-Cracker-OpenCL，参见 <a href="../../%E5%BE%AE%E4%BF%A1%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA/SQLCipher-Password-Cracker-OpenCL%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95.md">SQLCipher-Password-Cracker-OpenCL使用记录</a></p>
<h2 id="电脑端">电脑端</h2>
<h3 id="获取数据库">获取数据库</h3>
<p>这个不需要什么操作，很简单的复制即可，文件位于 <code>C:\Users\&lt;username&gt;\Documents\WeChat Files\&lt;wxid&gt;\Msg\</code> 下，分为很多个，比如 <code>.\Multi\MSG1.db</code><br>
貌似一个数据库最大 240MB，超过后会分割为多个</p>
<h4 id="破解密码-2">破解密码</h4>
<p>这个可以直接去内存里抓密码<br>
参见项目：<br>
<a href="https://github.com/AdminTest0/SharpWxDump">AdminTest0/SharpWxDump</a><br>
<a href="https://github.com/SpenserCai/GoWxDump">SpenserCai/GoWxDump</a><br>
<a href="https://github.com/SpenserCai/GoWxDump/files/11182406/GoWxDump.zip">SpenserCai/GoWxDump</a></p>
<p>据 <a href="https://blog.csdn.net/weixin_44495599/article/details/130030309">微信PC端数据库文件解密_微信db文件_异想之旅的博客-CSDN博客</a> 这个博主称：</p>
<blockquote>
<p>其中第一个项目在编译时就遇到了困难（本人没用过 C# 和 .NET），我最后是狠下心来跟着 <a href="https://cn-sec.com/archives/1596143.html">这篇教程</a> 下了个 VS 才编译出来，也将编译产物上传到了 <a href="https://github.com/yxzlwz/SharpWxDump/releases/tag/2023.4.2">我 Fork 的仓库</a>，然而发给别人用的时候发现似乎兼容性比较差，悲……不过应该说自己在自己的设备上用 VS 编译是最可靠的</p>
<p>第二个仓库就方便很多，只要电脑上有 Go 环境直接执行 <code>build.bat</code> 就行（记得配置 <code>go get</code> 的代理，否则下载第三方包会很慢）。不过需要说明的是，建议大家只使用它的 <code>show_info</code> 功能，它的解密极其不可靠。</p>
</blockquote>
<p>第三个为他自己编译结果，可以不需要 Go 环境</p>
<h3 id="其他相关项目">其他相关项目</h3>
<p>微信聊天记录挖掘机（未找到官网，应该是闭源）<br>
<a href="https://www.louyue.com/pcwx.htm">楼月电脑版微信聊天记录导出软件官方下载及使用说明</a>（闭源收费）<br>
<img src="/post/images/20220830_%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E8%AE%B0%E5%BD%95%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7%E6%96%B0%E7%89%88%E6%9C%AC.zip" alt="" loading="lazy"><br>
wx-dump-key-v0.1.1.exe（半数引擎报毒，谨慎使用）</p>
<h2 id="手机向电脑备份文件的破解">手机向电脑备份文件的破解</h2>
<p>大多数人都说不可破解，但下面有一些线索可供参考<br>
<a href="https://github.com/sumous/anti_sign/issues/4">微信聊天记录 BAK_0_TEXT 和 BAK_0_MEDIA · Issue #4 · sumous/anti_sign · GitHub</a></p>
<h3 id="杂项">杂项</h3>
<p><a href="https://github.com/symbolic/ExportWeChatHistory/tree/master">GitHub - symbolic/ExportWeChatHistory: export wechat history 导出微信聊天记录</a><br>
（闭源免费）</p>
<p><a href="https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=1641882&amp;highlight=%CE%A2%D0%C5%CA%FD%BE%DD%BF%E2%BD%E2%C3%DC">PC端微信数据库解密Python版【更新】 - 『编程语言区』 - 吾爱破解 - LCG - LSG |安卓破解|病毒分析|www.52pojie.cn</a><br>
<a href="https://www.52pojie.cn/thread-1153671-1-1.html">PC端微信数据库解密Python版 - 『编程语言区』 - 吾爱破解 - LCG - LSG |安卓破解|病毒分析|www.52pojie.cn</a><br>
（需要 52pojie 账号与财富值，估计与我文章中采用的 python 脚本大差不差）</p>
<p><a href="https://github.com/l123456789jy/WxDatabaseDecryptKey">Site Unreachable</a>（手机需要 root）</p>
<h2 id="MAC-IOS-系统">MAC/IOS 系统</h2>
<h3 id="IOS">IOS</h3>
<p>IOS 是利用 iTunes 备份至电脑后用软件解密<br>
<a href="http://wxbackup.imxfd.com/">微信聊天记录导出</a>（闭源免费）<br>
<a href="https://github.com/BlueMatthew/WechatExporter">GitHub - BlueMatthew/WechatExporter: Wechat Chat History Exporter 微信聊天记录导出备份程序</a><br>
<a href="https://github.com/tsycnh/WeChatExporter">GitHub - tsycnh/WeChatExporter: 一个可以快速导出、查看你的微信聊天记录的工具</a></p>
<h3 id="MAC">MAC</h3>
<p>MAC 与 win 类似，都是直接从微信的内存抓取数据库密码，然后对桌面版微信的数据库破解<br>
<a href="https://github.com/nalzok/wechat-decipher-macos">GitHub - nalzok/wechat-decipher-macos: DTrace scripts to extract chat history from WeChat on macOS</a></p>
]]></content>
      <categories>
        <category>微信数据导出</category>
      </categories>
      <tags>
        <tag>微信</tag>
        <tag>CS</tag>
      </tags>
  </entry>
  <entry>
    <title>微信数据导出-备份数据解密</title>
    <url>/post/96704730aa75/</url>
    <content><![CDATA[<h4 id="华为">华为</h4>
<table>
<thead>
<tr>
<th>语言</th>
<th>链接</th>
</tr>
</thead>
<tbody>
<tr>
<td>JAVA</td>
<td><a href="https://github.com/irsl/Huawei-Hisuite-KobackupCipherTool">GitHub - KobackupCipherTool</a></td>
</tr>
<tr>
<td>GO</td>
<td><a href="https://1248.ink/?p=8">[2022]华为手机提取APP数据文件（备份文件解密） – 自留地</a>（非开源，有混淆，半数引擎报毒）</td>
</tr>
<tr>
<td>python</td>
<td><a href="https://github.com/RealityNet/kobackupdec">GitHub - RealityNet/kobackupdec: Huawei backup decryptor</a></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="/post/images/HuaWei.exe" alt="" loading="lazy"></p>
<h4 id="小米">小米</h4>
<p><a href="https://github.com/poping520/unbaksdpak">GitHub - poping520/unbaksdpak: 小米手机助手 baksd_pak 文件解包</a><br>
（python）</p>
]]></content>
      <categories>
        <category>微信数据导出</category>
      </categories>
      <tags>
        <tag>微信</tag>
        <tag>CS</tag>
      </tags>
  </entry>
  <entry>
    <title>CC知识分享协议</title>
    <url>/post/69ecce42380b/</url>
    <content><![CDATA[<h4 id="协议介绍">协议介绍</h4>
<p>知识共享 (Creative Commons) 协议，俗称 CC 协议，它包含多个属性，可根据需求进行组合后声明版权<br>
CC 协议有 1.0, 2.0, 2.5, 3.0, 4.0 版本，建议选择的时候直接选最新的 4.0 版本</p>
<p>原则上适用于全世界范围<br>
协议启动后可以撤回，但是在协议存续期间签发出去的授权将继续有效，不能撤销已经发布出去的授权</p>
<p>主动宣告他人在协议限定范围内的分享行为可以不向作者告知。分享行为包括：网络上的发表、转载、二次发布，实体中的转载、印刷、使用、展览等，一般而言，这些行为概括为“转载”、“使用”、“二次演绎”三种形式。<br>
主动宣告不允许的使用行为。包括：商业性使用 (NC)、二次创作 (ND)、改变授权方式 (SA) 的再次分享</p>
<p>虽然这么说，但 CC 协议在国内只能算“君子协议”，目前在 CC 协议在中国知名度不高，直到 2021 年才出现首次依据 GPL 协议判罚，CC 协议至今还未出现</p>
<blockquote>
<p>CC 协议是基于国际法、国际惯例、美国法律撰写的基础版本（即国际版），为适应各国不同的版权政策，一般都需要进行本地化。中国大陆地区对 CC 3.0 协议进行了本地化，以适合中国地区的法律，这也是目前中国最新版本的 CC 协议。根据 CC 组织的说法，4.0 版本在最大程度上实现了在各司法区的适用，从 4.0 版本起，CC 协议可以不必等待各司法区的知识共享组织进行本地化，可以直接使用。目前，在 4.0 版协议发布后，3.0 的中文版就从 CC 官网上消失了，4.0 则还未本地化。</p>
</blockquote>
<blockquote></blockquote>
<blockquote>
<p><em>摘自 <a href="https://www.bilibili.com/read/cv2536622/">为什么你没授权就能用大大的作品？？—“知识共享”（CC协议）简单介绍 - 哔哩哔哩</a></em></p>
</blockquote>
<h4 id="不同规格">不同规格</h4>
<h5 id="BY">BY</h5>
<p>署名 (Attribution)<br>
使用你的作品的人必须给出适当的署名，提供指向对应 CC 协议的链接，同时标明是否（对原始作品）作了修改</p>
<h5 id="NC">NC</h5>
<p>非商业性使用 (NonCommercial)<br>
他人不可将你的作品用于商业目的</p>
<h5 id="ND">ND</h5>
<p>禁止演绎 (NoDerivatives)<br>
如果他人再混合、转换、或者基于你的作品创作，那么他不可以分发修改后的作品</p>
<h5 id="SA">SA</h5>
<p>相同方式共享 (ShareAlike)<br>
如果他人再混合、转换、或者基于你的作品创作，那么他必须基于与原先许可协议相同的许可协议分发修改后的作品</p>
<h5 id="PDM">PDM</h5>
<p>公有领域标志 (public domain mark)<br>
标记某一作品没有著作权，可以由任何人使用。典型对象包括著作权过期的古老作品、或者不构成作品的内容</p>
<h5 id="CC0">CC0</h5>
<blockquote>
<p>CC0 只代表作者放弃作品的著作权，但对于作品中涉及的肖像权、物权、商标权和专利权等其它权利，没有要求放弃，CC0 协议亦不会审查该部分内容的权利人<br>
CC0 规定，只有真正的作者才能放弃作品版权</p>
<p>我国《著作权法》规定，作品的署名权、修改权等著作人身权利由作者专属享有，是不能放弃和转让的，所以即使 CC0 协议声明放弃一切权利，在中国由于著作人身权不可放弃，即使作品签署了 CC0 协议，也依然有侵权的风险，特别是如果起诉的话，大概率会被法院判定“放弃版权”无效，而判决使用者侵权</p>
<p><em>本段出处已不可考</em></p>
</blockquote>
<h4 id="如何声明">如何声明</h4>
<p>可以使用这个网站在线生成：<a href="https://chooser-beta.creativecommons.org/">Choose a License</a>，跟随指引选择协议规格，填写作品相关信息后即可自动生成代码。将响应代码插入文章即可<br>
如果作品是文件的话，也可以仿照 git repo，在根目录下放置 LICENSE.txt 文件，文件内写上具体的协议内容。c 纯文本的协议内容在：<a href="https://creativecommons.org/licenses/by/4.0/legalcode.txt">creativecommons.org/licenses/by/4.0/legalcode.txt</a></p>
<h4 id="关于文章素材">关于文章素材</h4>
<p>使用 CC 协议声明版权的前提是确实拥有这篇文章的版权。<br>
如果引用了采用 CC 协议声明版权的文章或者素材，需要注意协议间的兼容性。<br>
下图为素材的兼容性关系，以对角线为轴对称，行和列的意义可互换，打勾代表这两类协议的素材可同时在一篇文章内使用<br>
<img src="/post/images/e7a2dcb82579119a55bfa12f40dc37ed_r.png" alt="" loading="lazy"></p>
<p>混合后的文章可采用的协议如下：<br>
<img src="/post/images/Pasted%20image%2020231121192407.png" alt="" loading="lazy"></p>
<p>表格中绿色的是可以使用的协议；标有黄色的是技术层面上可行，但是官方不推荐的用法；灰色的是不能使用的协议<br>
PD = Dedicated to or marked as being in the public domain via one of our <a href="https://creativecommons.org/publicdomain">public domain tools</a>, or other public domain material; adaptations of materials in the public domain may be built upon and licensed by the creator under any license terms desired.</p>
<h4 id="版本间的兼容">版本间的兼容</h4>
<p>版本间转化关系如下，未说明的即为不可转化<br>
参见 <a href="https://creativecommons.org/share-your-work/licensing-considerations/compatible-licenses/">Compatible Licenses - Creative Commons</a></p>
<ul>
<li>1.0 可转为 1.0</li>
<li>2.0 可转为 2.0, 2.5, 3.0, 4.0</li>
<li>2.5 可转为 2.5, 3.0, 4.0</li>
<li>3.0 可转为 3.0, 4.0</li>
<li>4.0 可转为 4.0</li>
</ul>
<h4 id="其他协议兼容性">其他协议兼容性</h4>
<p>包含 BY-SA 4.0 许可的素材的文章，只能采用 Free Art License 或者 GPLv3 声明<br>
参见 <a href="https://creativecommons.org/share-your-work/licensing-considerations/compatible-licenses/">Compatible Licenses - Creative Commons</a></p>
<h4 id="版权信息">版权信息</h4>
<p>本文中的图片摘自 <a href="https://creativecommons.org/faq/">Frequently Asked Questions - Creative Commons</a></p>
<p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://space.bilibili.com/36345802/article">This passage</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://github.com/sxr1223/">sxr1223</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p>
]]></content>
      <categories>
        <category>杂项</category>
      </categories>
      <tags>
        <tag>开源协议</tag>
      </tags>
  </entry>
  <entry>
    <title>功能测试</title>
    <url>/post/052635504fc8/</url>
    <content><![CDATA[<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mn>2</mn><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mn>2</mn><mi>ω</mi><mo>+</mo><mn>2</mn><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mn>2</mn><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mn>2</mn><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup><mo>+</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mo stretchy="false">(</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi>π</mi><mo stretchy="false">)</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mo stretchy="false">(</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mn>2</mn><mi>k</mi><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup><mo>+</mo><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></munderover><mo>∣</mo><mover accent="true"><mi>φ</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mo stretchy="false">(</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup><mo>+</mo><mo>∣</mo><mi>H</mi><mo stretchy="false">(</mo><mi>ω</mi><mo>+</mo><mi>π</mi><mo stretchy="false">)</mo><msup><mo>∣</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{split}
1&amp;=\sum_{k=-\infty}^\infty\mid \hat{\varphi}(\omega+2k\pi)\mid^2\\
&amp;=\sum_{k=-\infty}^\infty\mid \hat{\varphi}(2\omega+2k\pi)\mid^2\\
&amp;=\sum_{k=-\infty}^\infty\mid \hat{\varphi}(2(\omega+k\pi))\mid^2\\
&amp;=\sum_{k=-\infty}^\infty\mid H(\omega+k\pi)\hat{\varphi}(\omega+k\pi)\mid^2\\
&amp;=\sum_{k=-\infty}^\infty\mid H(\omega+2k\pi)\hat{\varphi}(\omega+2k\pi)\mid^2+
\sum_{k=-\infty}^\infty\mid H(\omega+(2k+1)\pi)\hat{\varphi}(\omega+(2k+1)\pi)\mid^2\\
&amp;=\mid H(\omega)\mid^2\sum_{k=-\infty}^\infty\mid \hat{\varphi}(\omega+2k\pi)\mid^2+
\mid H(\omega+\pi)\mid^2\sum_{k=-\infty}^\infty\mid \hat{\varphi}(\omega+(2k+1)\pi)\mid^2\\
&amp;=\mid H(\omega)\mid^2+\mid H(\omega+\pi)\mid^2
\end{split}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:21.3952em;vertical-align:-10.4476em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.9476em;"><span style="top:-12.9476em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-9.6357em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:-6.3239em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:-3.0121em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:0.2998em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:3.6116em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:6.1362em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:10.4476em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.9476em;"><span style="top:-12.9476em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-9.6357em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-6.3239em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">2</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0121em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:0.2998em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:3.6116em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">kπ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3604em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:6.1362em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:10.4476em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<pre class="mermaid">

graph LR
	id1[变频器]--&gt;id2[AC-DC-AC 间接变换]
	id1--&gt;id3[AC-AC 直接变换]--&gt;id4[晶闸管 相控 Cycloconverter]
	id3--&gt;id5[全控器件 斩波]

</pre>
<div class="wavedrom"><script type="WaveDrom">
{ signal: [
  { name: "CLK", wave: 'l...h...' },
  { name: "EN", wave: 'l.pppppl' },
  {},
  { name: 'GATED_CLK', wave: 'l...pppl' },
]}

</script></div>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一维数组</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">AAA</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">BBB</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">CCC</span></span><br><span class="line"></span><br><span class="line"><span class="string">key:[AAA,BBB,CCC]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多维数组</span></span><br><span class="line"><span class="attr">companies:</span></span><br><span class="line"> <span class="bullet">-</span></span><br><span class="line">  <span class="attr">id:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">company1</span></span><br><span class="line">  <span class="attr">price:</span> <span class="string">200W</span></span><br><span class="line"> <span class="bullet">-</span></span><br><span class="line">  <span class="attr">id:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">company2</span></span><br><span class="line">  <span class="attr">price:</span> <span class="string">500W</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 流式表示（Flow）</span></span><br><span class="line"><span class="attr">companies:</span> [&#123;<span class="attr">id:</span> <span class="number">1</span>,<span class="attr">name:</span> <span class="string">company1</span>,<span class="attr">price:</span> <span class="string">200W</span>&#125;,&#123;<span class="attr">id:</span> <span class="number">2</span>,<span class="attr">name:</span> <span class="string">company2</span>,<span class="attr">price:</span> <span class="string">500W</span>&#125;]</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">int</span> buffer[SIZE];</span><br><span class="line">    <span class="type">int</span> head;</span><br><span class="line">    <span class="type">int</span> tail;</span><br><span class="line">    <span class="type">int</span> count;</span><br><span class="line">&#125; CircularBuffer;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(CircularBuffer *cb, <span class="type">int</span> data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cb-&gt;count &lt; SIZE) &#123;</span><br><span class="line">        cb-&gt;buffer[cb-&gt;head] = data;</span><br><span class="line">        cb-&gt;head = (cb-&gt;head + <span class="number">1</span>) % SIZE;</span><br><span class="line">        cb-&gt;count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pop</span><span class="params">(CircularBuffer *cb)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cb-&gt;count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> data = cb-&gt;buffer[cb-&gt;tail];</span><br><span class="line">        cb-&gt;tail = (cb-&gt;tail + <span class="number">1</span>) % SIZE;</span><br><span class="line">        cb-&gt;count--;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// Buffer is empty</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SEC_YEAR  (365*24*60*60)UL</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MIN(a,b)  ((a)&lt;=(b)?(a):(b))</span></span><br><span class="line"></span><br><span class="line">least = MIN(*p++, b);  <span class="comment">// 指针p会做两次自增操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 消除副作用</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> min_i(x,y)    ((x)&lt;=(y)?(x):(y))	  <span class="comment">//（1）</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> min_t(type,x,y) (&#123;type _x = x;\       <span class="comment">//（2）</span></span></span><br><span class="line">                        type _y = y;\</span><br><span class="line">                        _x&lt;_y?_x:_y;\</span><br><span class="line">                        &#125;)</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> min(x,y)    &#123;const typeof(x)  _x = (x);\  <span class="comment">//（3）</span></span></span><br><span class="line">                    <span class="type">const</span> <span class="title function_">typeof</span><span class="params">(y)</span> _y = (y);\</span><br><span class="line">                    (<span class="type">void</span>)(&amp;_x=&amp;_y);\	  <span class="comment">//（4）</span></span><br><span class="line">                    _x&lt;_y?_x:_y;\</span><br><span class="line">                    &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>杂项</category>
      </categories>
  </entry>
  <entry>
    <title>Modelsim 利用 TCL 快速仿真（gowin 与 pango 仿真解析）</title>
    <url>/post/e71454bcd5ff/</url>
    <content><![CDATA[<p>此处介绍一种可以不必新建工程，快速进行仿真的方法，也是目前 <code>gowin</code> 和 <code>pango</code> 例程中使用的方法。其本质就是利用 <code>.bat</code> 批处理文件启动 Modelsim，然后再利用 <code>tcl</code> 文件（<code>gowin</code> 使用 <code>.do</code> 文件）将编译、仿真等操作自动化，从而节省操作</p>
<h4 id="bat-文件"><code>.bat</code> 文件</h4>
<p>基本上都是调用 Modelsim，然后使用 <code>-do</code> 参数执行 TCL 脚本，其参数可为单个 TCL 文件（<code>gowin</code> 仿真例程），或者是一行在 <code>Transcript</code> 中执行的指令</p>
<h5 id="pangu-仿真例程"><code>pangu</code> 仿真例程</h5>
<p>由于 PDS 中可以直接启动仿真，PDS 通过 <code>.bat</code> 文件的返回值判断 Modelsim 是否成功启动</p>
<p>PDS 玩的比较花，将编译与仿真分为两个 TCL 文件。为了执行两个 TCL 文件，故使用一行在 <code>Transcript</code> 中执行的指令，两个指令用分号分隔</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">REM run_behav.bat</span></span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> bin_path=C:/<span class="built_in">path</span>/to/ModelSim/win64</span><br><span class="line"><span class="built_in">cd</span> D:/<span class="built_in">path</span>/to/demo/<span class="number">2</span>_Demo/<span class="number">01</span>_led_test/sim/behav</span><br><span class="line"><span class="keyword">call</span> &quot;<span class="variable">%bin_path%</span>/modelsim&quot;   -<span class="keyword">do</span> &quot;<span class="keyword">do</span> &#123;run_behav_compile.tcl&#125;;<span class="keyword">do</span> &#123;run_behav_simulate.tcl&#125;&quot; -l run_behav_simulate.log</span><br><span class="line"><span class="keyword">if</span> &quot;<span class="variable">%errorlevel%</span>&quot;==&quot;<span class="number">1</span>&quot; <span class="keyword">goto</span> END</span><br><span class="line"><span class="keyword">if</span> &quot;<span class="variable">%errorlevel%</span>&quot;==&quot;<span class="number">0</span>&quot; <span class="keyword">goto</span> SUCCESS</span><br><span class="line">:END</span><br><span class="line"><span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">:SUCCESS</span><br><span class="line"><span class="keyword">exit</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h5 id="gowin-仿真例程"><code>gowin</code> 仿真例程</h5>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">REM do.bat</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">D:\<span class="title">Program_Files</span>\<span class="title">ModelSim_2020</span>.4\<span class="title">win64</span>\<span class="title">modelsim.exe</span> -<span class="title">do</span> <span class="title">cmd.do</span></span></span><br></pre></td></tr></table></figure>
<h4 id="TCL-文件">TCL 文件</h4>
<p>基本上都是新建库，编译器件到库，然后再进行仿真，最后启动各个界面，比如波形等等<br>
TCL 文件其实就是将一般 Modelsim 仿真操作进行自动化。对照下面的 TCL 文件，不难发现，其中的各个参数与指令就是手动仿真的各个操作</p>
<h5 id="pangu-仿真例程-2"><code>pangu</code> 仿真例程</h5>
<p>每次在 PDS 中进行仿真时，都会自动生成对应的 TCL 脚本<br>
虽然看着方便，但反而带来了一些额外的问题，比如编译和仿真的参数无法修改<br>
PDS 这种仿真的优点是不会重复编译库文件，工程中不需要携带未编译的库文件，一次编译，到处运行（不过也可能由于库的编译选项与期待的不同导致仿真报错或者仿真结果错误）</p>
<p><code>run_behav_compile.tcl</code> 文件主要就是使用 <code>vlib</code> 新建库，然后再使用 <code>vmap</code> 将已编译好的库添加至 Modelsim，最后再使用 <code>vlog</code> 编译当前工程内的 Verilog 文件至 <code>work</code> 库</p>
<figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line"><span class="comment"># run_behav_compile.tcl</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br><span class="line"><span class="comment"># Created on: xxxxxx</span></span><br><span class="line"><span class="comment"># Auto generated by Pango</span></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br><span class="line"></span><br><span class="line">vlib  work</span><br><span class="line">vmap  work ./work</span><br><span class="line">vmap  usim <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/usim&quot;</span></span><br><span class="line">vmap  adc <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/adc&quot;</span></span><br><span class="line">vmap  ddrc <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/ddrc&quot;</span></span><br><span class="line">vmap  ddrphy <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/ddrphy&quot;</span></span><br><span class="line">vmap  hsst_e2 <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/hsst_e2&quot;</span></span><br><span class="line">vmap  iolhr_dft <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/iolhr_dft&quot;</span></span><br><span class="line">vmap  ipal_e1 <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/ipal_e1&quot;</span></span><br><span class="line">vmap  pciegen2 <span class="string">&quot;E:/Program_Files/ModelSim_2020.4/pango_sim_libraies_v/pciegen2&quot;</span></span><br><span class="line">vlog   <span class="string">&quot;E:/FPGA/2_Demo/01_led_test/source/Desktop/01_led_test.v&quot;</span> -work work</span><br><span class="line">vlog   <span class="string">&quot;E:/FPGA/2_Demo/01_led_test/source/Desktop/tb_led_test.v&quot;</span> -work work</span><br><span class="line">vlog   <span class="string">&quot;E:/FPGA/2_Demo/01_led_test/source/source/Desktop/01_led_test.v&quot;</span> -work work</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br></pre></td></tr></table></figure>
<p><code>run_behav_simulate.tcl</code> 文件的功能是启动仿真<br>
<code>vsim</code> 进行仿真，<code>-L</code> 指定使用的库，最后的参数为进行仿真的模块。<code>-novopt</code> 会导致新版本的 Modelsim 报错，需要替换为 <code>-voptargs=&quot;+acc&quot;</code> 选项<br>
<code>add</code> 是添加信号至示波器<br>
<code>view</code> 是打开指定的窗口<br>
<code>run</code> 是进行指定时长的仿真</p>
<figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line"><span class="comment"># run_behav_simulate.tcl</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br><span class="line"><span class="comment"># Created on: xxxxxx</span></span><br><span class="line"><span class="comment"># Auto generated by Pango</span></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br><span class="line"></span><br><span class="line">vsim  -novopt  -L work -L usim -L adc -L ddrc -L ddrphy -L hsst_e2 -L iolhr_dft -L ipal_e1 -L pciegen2 tb_led_test usim.GTP_GRS</span><br><span class="line">add wave *</span><br><span class="line">view wave</span><br><span class="line">view structure</span><br><span class="line">view signals</span><br><span class="line"></span><br><span class="line">run <span class="number">1000</span>ns</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br></pre></td></tr></table></figure>
<h5 id="gowin-仿真例程-2"><code>gowin</code> 仿真例程</h5>
<p><code>gowin</code> 仿真比较直接，每个工程都包含了对应器件的未编译库文件，也就是 <code>xxxx\tb\prim_sim.v</code> 文件（所以从示例工程中直接复制仿真相关文件可能导致器件不同而导致仿真出错，千万记得修改）</p>
<p>原始版本基本与 <code>pango</code> 仿真相同，也需要将 <code>-novopt</code> 选项更换为 <code>-voptargs=&quot;+acc&quot;</code>，只不过 <code>gowin</code> 是二合一，并且每次都重新编译库文件</p>
<p>下面是我修改版本，使用预先编译好的库，并且在 <code>vlog</code> 中使用 <code>-f</code> 参数指定需要编译的文件<br>
顺带一提，<code>gowin</code> 库文件的源文件在 <code>Gowin\IDE\simlib</code> 下</p>
<figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cmd.do</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## part 1: new lib</span></span><br><span class="line">vlib work</span><br><span class="line">vmap work work</span><br><span class="line"></span><br><span class="line"><span class="comment">## part 2: load design</span></span><br><span class="line"><span class="comment"># vlog -sv -incr -work work &quot;../tb/prim_sim.v&quot;</span></span><br><span class="line">vlog -sv -L gowin_gw1n -L work +incdir+../tb -work work <span class="string">&quot;../tb/tb.v&quot;</span></span><br><span class="line">vlog -sv -L gowin_gw1n -L work +incdir+../src/ -<span class="keyword">incr</span> -work work -f <span class="string">&quot;../vflist.txt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## part 3: sim design</span></span><br><span class="line">vsim -L gowin_gw1n -L work work.tb -voptargs=<span class="string">&quot;+acc&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## part 4: add signals</span></span><br><span class="line"><span class="comment"># add wave -group &quot;group_name&quot; &#123;sim:/tb/xxx_test_tb/*&#125;</span></span><br><span class="line">add wave -position insertpoint sim:/tb/xxx_test_tb/xxxx</span><br><span class="line"></span><br><span class="line"><span class="comment">## part 5: show ui </span></span><br><span class="line">view wave</span><br><span class="line">view structure</span><br><span class="line">view signals</span><br><span class="line"></span><br><span class="line"><span class="comment">## part 6: run </span></span><br><span class="line">run <span class="number">0.5</span>ms</span><br></pre></td></tr></table></figure>
<h4 id="关于禁止仿真优化">关于禁止仿真优化</h4>
<p>仿真中的优化是在 <code>Simulate-&gt;Start Simulation</code> 中勾选 <code>Optimization</code> 中的 <code>Enable optimization</code>，然后点击 <code>Optimization Options...</code>，在其中的 <code>Visiblity</code> 选项卡，选中 <code>Apply full visibility to all modules(full debug mode)</code> 选项，就是禁用仿真中的优化。其实相当于在 <code>vsim</code> 仿真指令中加入 <code>-voptargs=&quot;+acc&quot;</code> 选项</p>
<p>如果没有去掉优化，在 <code>Library</code> 界面中进行仿真的库中会出现一个 <code>_opt</code> 文件，代表是被优化后的</p>
]]></content>
      <tags>
        <tag>FPGA/tools/Modelsim</tag>
        <tag>FPGA/IC/Pango</tag>
        <tag>FPGA/IC/gowin</tag>
      </tags>
  </entry>
  <entry>
    <title>Modelsim 的库管理与编译</title>
    <url>/post/1cb831d3e25a/</url>
    <content><![CDATA[<p>库的管理建议使用 GUI，操作简便，没必要上 CLI，比修改 <code>Modelsim.ini</code> 简单易行。除非是需要反复执行的操作，否则不建议用 CLI</p>
<h4 id="库的新建">库的新建</h4>
<p>启动 Modelsim 后，在 <code>Library</code> 窗口内 <code>右键-&gt;New-&gt;Library...</code> 即可新建一个库<br>
其中，<code>a new library</code> 和 <code>a new library and a logical mapping to it</code> 都是新建一个库，物理位置在 <code>ModelSim\examples\library_name</code>；<code>a map to an existing library</code> 就是字面意思，将一个已存在的库加入 Modelsim，库的名称可任意</p>
<p>一般新建库就选 <code>a new library and a logical mapping to it</code> 即可</p>
<h4 id="库的管理">库的管理</h4>
<p>新建完毕后，可在 <code>Library</code> 窗口内找到，库的名称后有一个 <code>(empty)</code>，代表这个库内没有编译好的器件</p>
<p>在库的名称上，<code>右键-&gt;Edit</code> 即可修改库的名称与库的物理路径。<code>Library Mapping Name</code> 就是在 Modelsim 内的名称，<code>Library Pathname</code> 是库的物理路径，可点 <code>Browse</code> 选择物理路径，也可直接输入</p>
<h4 id="编译器件至库">编译器件至库</h4>
<h5 id="编译选项">编译选项</h5>
<p>菜单栏 <code>Compile-&gt;Compile Options</code> 可修改编译选项，<code>Verilog</code> 和 <code>VHDL</code> 是独立的两种选项。并且此处的修改会一直生效，即便重启也不会消失</p>
<p>其中比较特别的是 <code>Verilog</code> 和 <code>VHDL</code> 选项卡中的 <code>Disable optimizations by using -O0</code> 选项，可关闭所有优化</p>
<p><code>Coverage</code> 选项卡中也有一个 <code>Optimization level (-coveropt)</code> 选项</p>
<p>多嘴说一句，仿真中的优化与此处的无关，仿真中的优化是在 <code>Simulate-&gt;Start Simulation</code> 中勾选 <code>Optimization</code> 中的 <code>Enable optimization</code>，然后点击 <code>Optimization Options...</code>，在其中的 <code>Visiblity</code> 选项卡，选中 <code>Apply full visibility to all modules(full debug mode)</code> 选项，就是禁用仿真中的优化。其实相当于在 <code>vsim</code> 仿真指令中加入 <code>-voptargs=&quot;+acc&quot;</code> 选项</p>
<h5 id="编译">编译</h5>
<p>菜单栏 <code>Compile-&gt;Compile...</code> 可进行编译<br>
最上方的 <code>Library</code> 可选择编译后的器件位于哪一个库<br>
关于下方的 <code>Compile selected files together</code> 选项，我实验后并未发现有什么区别<br>
选择文件可以长按 <code>Shift</code> 或者 <code>Ctrl</code> 进行多选，一次编译多个文件</p>
]]></content>
      <tags>
        <tag>FPGA/tools/Modelsim</tag>
      </tags>
  </entry>
  <entry>
    <title>PDS联合Modelsim仿真中的-novopt报错问题 (vsim-12110)</title>
    <url>/post/c82d5d5441d0/</url>
    <content><![CDATA[<h4 id="现象描述">现象描述</h4>
<p>本人在使用 MES22GP_v1 开发板，也就是 Pangu 的 FPGA，尝试通过 PDS 调用 Modelsim 进行仿真。库编译正常，但是无法仿真，出现 vsim-12110 报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># do &#123;run_behav_simulate.tcl&#125;</span><br><span class="line"># vsim -novopt -L work -L usim -L adc -L ddrc -L ddrphy -L hsst_e2 -L iolhr_dft -L ipal_e1 -L pciegen2 tb_led_test usim.GTP_GRS </span><br><span class="line"># Start time: 11:14:14 on Feb 27,2024</span><br><span class="line"># ** Error (suppressible): (vsim-12110) All optimizations are disabled because the -novopt option is in effect. This will cause your simulation to run very slowly. If you are using this switch to preserve visibility for Debug or PLI features, please see the User&#x27;s Manual section on Preserving Object Visibility with vopt. -novopt option is now deprecated and will be removed in future releases.</span><br><span class="line"># Error loading design</span><br><span class="line"># Error: Error loading design</span><br><span class="line">#        Pausing macro execution</span><br><span class="line"># MACRO ./run_behav_simulate.tcl PAUSED at line 6</span><br></pre></td></tr></table></figure>
<h4 id="原因分析">原因分析</h4>
<p>根据报错，不难发现是工程目录下的 <code>.\2_Demo\01_led_test\sim\behav\run_behav_simulate.tcl</code> 文件中出现了 <code>-novopt</code> 选项所导致的</p>
<p>查阅资料可发现，该问题是由于 Modelsim 版本更新导致的。据说在 10.7 版本之前，Modelsim 支持 <code>-novopt</code> 选项，该选项可关闭 Modelsim 对于仿真文件的优化，防止错误的优化，导致端口丢失等问题。但从 10.7 版本开始，Modelsim 就不再支持该选项，仿真中一旦出现该选项将会产生报错，也就是 <code>vsim-12110</code>。新版本的 Modelsim 使用 <code>-voptargs=&quot;+acc&quot;</code> 选项代替 <code>-novopt</code> 选项</p>
<h4 id="解决方案">解决方案</h4>
<p>虽然看上去只需要把 <code>.\2_Demo\01_led_test\sim\behav\run_behav_simulate.tcl</code> 文件中的 <code>-novopt</code> 选项删除或者改为 <code>-novopt</code> 选项即可，但实际上每次从 PDS 启动仿真时都会重新生成这个文件，所以改了也白改<br>
而 PDS 内我并未找到相关设置，只能作罢<br>
有些地方说，可以把 Modelsim 安装目录下的 <code>Modelsim.ini</code> 中的 <code>VoptFlow=1</code> 改为 <code>VoptFlow=0</code>，亲测无效</p>
<h5 id="方案一">方案一</h5>
<p>直接无脑卸载 Modelsim 后安装低版本的 Modelsim</p>
<h5 id="方案二">方案二</h5>
<p>在 PDS 中，从 TB 文件上右键启动 Modelsim 仿真，Modelsim 仿真会报错。先不管报错，在 Modelsim 的 <code>Library</code> 选项卡内找到 <code>work</code> 库<br>
库的名称是根据 <code>.\2_Demo\01_led_test\sim\behav\run_behav_compile.tcl</code> 文件内 <code>vlib work</code> 语句确定的<br>
展开 <code>work</code> 库，可发现 TB 文件的顶层模块，右键，选择 <code>Simulate with full Optimization</code>，待结束后切换回 <code>Library</code> 界面，再次在 TB 文件的顶层模块上右键，选择 <code>Simulate</code><br>
待仿真结束后，<code>Object</code> 窗口内就会出现各个信号，选中需要的信号，然后右键，选择 <code>Add Wave</code>，添加需要的信号到 <code>Wave</code> 窗口<br>
但此时 <code>Wave</code> 窗口内的信号并没有数据，显示 <code>No-Data</code><br>
接着在 <code>Transcript</code> 窗口内输入 <code>run &lt;run_sim_time&gt;</code>，比如仿真 50ms，为 <code>run 50ms</code>，待仿真结束后，<code>Wave</code> 窗口内就会出现信号的波形，这一步也可以由菜单栏或者工具栏的 <code>Simulate-&gt;Run All</code> 完成</p>
<p>这个步骤还是比较复杂，应该可以写成一个 TCL 文件自动化处理，不过这个就得留待以后研究了</p>
<h5 id="方案三">方案三</h5>
<p>手动修改 <code>run_behav_simulate.tcl</code> 文件，不从 PDS 启动仿真，而是手动从 <code>2_Demo\01_led_test\sim\behav</code> 启动仿真</p>
<p>首先从 PDS 启动一次仿真，会报错终止仿真，直接关闭即可。此处只是利用 PDS 创建 TCL 与批处理文件<br>
然后手动修改 <code>run_behav_simulate.tcl</code> 文件，将其中 <code>-novopt</code> 的参数替换为 <code>-voptargs=&quot;+acc&quot;</code><br>
最后双击 <code>run_behav.bat</code> 启动仿真即可</p>
<h5 id="Quartus-中的解决方案">Quartus 中的解决方案</h5>
<p>对于 Quartus，可以在 <code>Simulation Waveform Editor</code> 中的 <code>Simulation -&gt; Simulation Settings</code>，选择对应语言 (<code>S or SV</code>)，编辑 <code>Functional Simulation Settings</code> 和 <code>Timing Simulation Settings</code> 其中的 <code>ModelSim Script</code>，删除其中的 <code>-novopt</code></p>
<h4 id="其他相关文章">其他相关文章</h4>
<p><a href="https://blog.csdn.net/lijun1217815/article/details/134645841">Modelsim编译、仿真报告关于novopt的错误（vlog-12110）_-novopt-CSDN博客</a></p>
]]></content>
      <tags>
        <tag>FPGA/tools/Modelsim</tag>
        <tag>FPGA/IC/Pango</tag>
      </tags>
  </entry>
  <entry>
    <title>Ansys Q3D PCB 寄生参数提取</title>
    <url>/post/8c7e52219339/</url>
    <content><![CDATA[<h2 id="简介">简介</h2>
<p>Ansys Q3D 一般用于 PCB 寄生参数提取。</p>
<h2 id="操作">操作</h2>
<h3 id="AD-导出">AD 导出</h3>
<p>一般比较常用的是使用 AD 的 <code>Ansys EDB</code> 插件导出为 <code>.edb</code> 文件。但经我测试，使用 <code>Ansoft Neutral</code> 导出为 <code>.anf</code> 文件也可使用。</p>
<h4 id="导出为-anf-文件">导出为 <code>.anf</code> 文件</h4>
<p>导出为 <code>.anf</code> 文件最大的好处是不需要额外安装插件，只要在 AD 安装时勾选了 <code>Importers\Exporters -&gt; Ansoft</code>，就会自动安装好插件，无需再次配置。如果安装时未勾选该选项，就需要参考 <a href="#%E5%AF%BC%E5%87%BA%E4%B8%BA%60.edb%60%E6%96%87%E4%BB%B6">导出为<code>.edb</code>文件</a> 中的介绍安装插件，之后再按本节内容操作。</p>
<p>在 AD 中打开需要提取寄生参数的 PCB 文件，选择 <code>File-&gt;Export-&gt;Ansoft Neutral</code> 进行导出，然后选择导出文件保存位置，最后弹出的 <code>Ansoft Export</code> 窗口保持默认设置，点 <code>OK</code> 即可。</p>
<h4 id="导出为-edb-文件">导出为 <code>.edb</code> 文件</h4>
<p>导出为 <code>.edb</code> 文件需要使用 AD 的 <code>Ansys EDB</code> 插件，一般都需要手动安装。</p>
<h5 id="AD-在线安装插件">AD 在线安装插件</h5>
<p>该方法适用于没有 AD 安装包的情况。</p>
<p>首先在 <a href="https://www.altium.com/">AD官网</a> 注册账号，可随意使用任何邮箱，不必是教育或者公司邮箱。</p>
<p>然后在 AD 中打开需要提取寄生参数的 PCB 文件，点击 <code>Tools-&gt;Preferences</code> 或者右上角的小齿轮或者在 PCB 任意处 <code>右键-&gt;Preferences</code> 打开 AD 的 <code>Preferences</code> 界面，在 <code>System-&gt;Account Management</code> 页内，<code>Altimu Connections</code> 栏选 <code>Yes, I would...</code>，<code>Account Sign in</code> 栏填入账号密码，<code>Altium Account Management Servers</code> 栏填 <code>portal365.altium.com</code>，设置完毕后点 <code>Apply</code> 即可在 AD 内登录账号。顺便在 <code>System-&gt;Installation</code> 页内，<code>Automatic checking</code> 栏内选 <code>Global Installation Servers</code>。<br>
这一步如果操作正确，那么在 AD 右上角的头像处就会显示 <code>Not Connected</code> 或者 <code>Altium 365</code> 之类的。如果显示 <code>Not Signed in</code> 则代表尚未登陆，可点击头像 <code>Not Signed in</code> 手动登录。</p>
<p>之后，点击右上角的头像，选择 <code>Extensions and Updates</code> 安装插件。在 <code>Purchased</code> 页内的 <code>Software Extensions</code> 选择要安装的插件，即 <code>Ansys EDB</code>，进行安装。</p>
<h5 id="AD-离线安装插件">AD 离线安装插件</h5>
<p>该方法适用于有 AD 安装包的情况。</p>
<p>首先将 AD 的安装包解压到任意位置。</p>
<p>然后在 AD 中打开需要提取寄生参数的 PCB 文件，点击 <code>Tools-&gt;Preferences</code> 或者右上角的小齿轮或者在 PCB 任意处 <code>右键-&gt;Preferences</code> 打开 AD 的 <code>Preferences</code> 界面，在 <code>System-&gt;Installation</code> 页内，<code>Automatic checking</code> 栏内选 <code>Offline Installation</code>，并填入 AD 安装包解压后的位置。</p>
<p>之后，点击右上角的头像，选择 <code>Extensions and Updates</code> 安装插件。在 <code>Purchased</code> 页内的 <code>Software Extensions</code> 选择要安装的插件，即 <code>Ansys EDB</code>，进行安装。</p>
<h5 id="导出文件">导出文件</h5>
<p>与导出为 <code>.anf</code> 文件非常相似，在 AD 中打开需要提取寄生参数的 PCB 文件，选择 <code>File-&gt;Export-&gt;Ansys EDB</code> 进行导出，然后选择导出文件保存位置，最后弹出的 <code>Ansys EDB Export Options</code> 窗口保持默认设置，点 <code>OK</code> 即可。</p>
<h3 id="Ansys-SIwave-处理"><code>Ansys SIwave</code> 处理</h3>
<p>启动 <code>Ansys SIwave</code> ，不必新建工程，直接从 <code>Import</code> 栏内选 <code>Ansys EDB...</code> 或者 <code>ANF...</code> 导入相应的文件。注意，AD 导出的 <code>.ebd</code> 文件是保存在 <code>&lt;project_name&gt;.edb</code> 文件夹内的 <code>edb.def</code> 文件，从 <code>Ansys SIwave</code> 导入时需要选中 <code>&lt;project_name&gt;.edb</code> 文件夹才能正确导入。</p>
<p>导入后，会弹出 <code>Select nets to import from main</code> 窗口，勾选需要导入的网络后点击 <code>Import Configuration</code> 即可导入到 <code>Ansys SIwave</code> 中。</p>
<p>接着，在 <code>Ansys SIwave</code> 左侧的 <code>Signal</code> 页内勾选所需的信号，选中的网络会在其下方的 <code>Selected Nets</code> 内显示。</p>
<p>最后，保存当前的 <code>SIwave</code> 工程，在上方的 <code>Export</code> 内选择 <code>Export to Q3D Extractor...</code>，在弹出的 <code>Export Q3D Project</code> 界面，勾选 <code>Capacitance</code>、<code>DC Inductance/Resistance</code>、<code>DC Resistance</code> 和 <code>AC Inductance/Resistance</code> 选项即可。</p>
<h3 id="Ansys-Electronics-Desktop-仿真"><code>Ansys Electronics Desktop</code> 仿真</h3>
<p>使用 <code>Ansys Electronics Desktop</code> 打开 <code>Ansys SIwave</code> 导出的 <code>.aedt</code> 文件，可看到 PCB 的模型，其中包括之前选中网络的铜箔、过孔通孔、基板与过孔填充材料。<code>copper</code> 材质的为铜箔和过孔通孔；<code>FR4_epoxy</code> 为基板材料，一般都是 <code>FR4</code>；<code>solder</code> 为贴片元件焊盘。一般基板与贴片元件焊盘影响不大，可直接删除 <code>FR4_epoxy</code> 和 <code>solder</code> 材料下的模型。并且，如果不删除 <code>solder</code> 下的模型，仿真报错 <code>Terminal 'xxx': Terminal should be assigned on conductors </code> 与 <code>Terminal 'xxx': Terminal is in the wrong net</code>；执行 <code>Auto Identify Nets</code> 后会在每个贴片元件焊盘自动生成一个 <code>Current Source</code> 与 <code>Current Sink</code>，这一般都是错误的，仿真也会报错。</p>
<p>接着要对铜箔进行连接，某些走线虽然是相同网络，但可能并不相连。这时就需要手动绘制一些长方体将这些孤立的铜箔相连。当然，如果不影响参数提取，也可不手动连接，也可直接删除。</p>
<p>之后设置 <code>Current Source</code> 与 <code>Current Sink</code>。一个网络上只能有一个 <code>Current Sink</code>，但可有多个 <code>Current Source</code>。按 <code>F</code> 切换到 <code>Face</code>，选中一个面，<code>右键-&gt;Assign Exaction-&gt;Sink</code> 或者 <code>右键-&gt;Assign Exaction-&gt;Source</code> 即可。</p>
<p>为防止网络设置有错误，可在模型的任意位置 <code>右键-&gt;Auto Identify Nets</code> 自动划分网络。这一步并不必要，有时不进行也不会报错，但如果无法仿真不妨尝试一下。</p>
<p>然后配置仿真设置。在 <code>Project Manager</code> 窗口内的 <code>Analysis</code> 上 <code>右键-&gt;Add Solution Setup...</code> 添加一个仿真设置。一般只需修改 <code>General</code> 中的 <code>Solution Frequency</code>。</p>
<p>如果需要对不同频率下的电路进行仿真，可在特定的仿真设置，比如 <code>Setup1</code> 上，<code>右键-&gt;Add Frequency Sweep</code> 添加扫频。</p>
<p>最后，在 <code>Project Manager</code> 窗口内的 <code>Analysis</code> 上 <code>右键-&gt;Analysis All</code> 运行仿真。仿真结束后，在 <code>Project Manager</code> 窗口内的 <code>Results</code> 上 <code>右键-&gt;Solution Data</code>。在 <code>Solution: main - Q3DModel</code> 窗口内，将右侧的 <code>CG</code> 改为 <code>AC RL</code> 下方就会显示寄生电阻和电感。</p>
<p>也可在 <code>Field Overlays</code> 中选择 <code>AC R/L Fields</code> 中的 <code>SubfaceJac</code>，即可视化表面电流密度。</p>
<h2 id="杂谈">杂谈</h2>
<p>貌似 PCB 文件中有中文会导致仿真失败。为保证无中文，可新建一个 PCB，将需要提取寄生参数的网络复制到新 PCB 中。</p>
<h2 id="相关文章">相关文章</h2>
<p><a href="https://blog.csdn.net/hu706789355/article/details/134407524">Q3D对PCB电路板寄生参数提取，RLC_q3d提取寄生参数-CSDN博客</a><br>
<a href="https://blog.csdn.net/weixin_46413772/article/details/137653876">用ansys q3d提取pcb板上的寄生参数及注意事项_ansys仿真寄生参数-CSDN博客</a></p>
]]></content>
      <tags>
        <tag>电路/仿真软件/Ansys</tag>
      </tags>
  </entry>
  <entry>
    <title>指令 .step 与相关操作</title>
    <url>/post/31ad51773906/</url>
    <content><![CDATA[<p><code>.step</code> 指令的作用是参数扫描，使某个参数按一定规律变化，对每个值进行仿真，仿真类型依据另一条仿真指令确定（<code>Analysis Command</code>，比如 <code>.trans</code> 和 <code>.dc</code> 等）。一个仿真中最多只能有三个可变参数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.step param &lt;Name&gt; &lt;Start Value&gt; &lt;Stop Value&gt; &lt;lncrement&gt; </span><br><span class="line">.step &lt;oct|dec&gt; param &lt;Name&gt; &lt;Start Value&gt; &lt;Stop Value&gt; &lt;Points&gt;</span><br><span class="line">.step param &lt;Name&gt; list &lt;value1&gt; [&lt;value2&gt; [&lt;value3&gt;[…]]</span><br></pre></td></tr></table></figure>
<p>参数中的 <code>dec</code> 代表十倍频，<code>oct</code> 为二倍频。设每倍频点数 <code>&lt;Points&gt;</code> 为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>，起始点为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，每个各点数值的计算方法如下</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="center" columnspacing="0em"><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mfrac><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mn>10</mn></mrow><mi>N</mi></mfrac><mi>n</mi></mrow></msup><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mfrac><mn>1</mn><mi>N</mi></mfrac><mi>n</mi></mrow></msup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mfrac><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mn>2</mn></mrow><mi>N</mi></mfrac><mi>n</mi></mrow></msup><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mfrac><mn>0.30103</mn><mi>N</mi></mfrac><mi>n</mi></mrow></msup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{gather}
x_{n}=x_{0}\cdot 10^{\frac{\log_{10}10}{N}n}=x_{0}\cdot 10^{\frac{1}{N}n}\\
x_{n}=x_{0}\cdot 10^{\frac{\log_{10}2}{N}n}=x_{0}\cdot 10^{\frac{0.30103}{N}n}
\end{gather}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.593em;vertical-align:-1.5465em;"></span><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0465em;"><span style="top:-4.0465em;"><span class="pstrut" style="height:3.1365em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1365em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0336em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5375em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight"><span class="mord mtight">10</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2996em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.2453em;"></span><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.004em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.1365em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1365em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0336em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5375em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight"><span class="mord mtight">10</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2996em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.2453em;"></span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.004em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">0.30103</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5465em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.0465em;"><span style="top:-4.0465em;"><span class="pstrut" style="height:3.1365em;"></span><span class="eqn-num"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.1365em;"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5465em;"><span></span></span></span></span></span></span></span></span></p>
<h4 id="step-指令下波形显示"><code>.step</code> 指令下波形显示</h4>
<p>观察电路波形与无 <code>.step</code> 指令的电路相差不大，可以通过 <code>View-&gt;Visible Traces</code> 显示。在出现了波形显示窗口（<code>.raw</code> 文件浏览窗口），光标在原理图上就会自动变成 <code>Probe</code>，点击节点或者元件就可将对应节点或者元件电流波形添加至波形观察窗口。</p>
<p>如果不想显示一簇内所有曲线，可以在波形显示窗口（<code>.raw</code> 文件浏览窗口）<code>Right Click-&gt;View-&gt;Select Steps</code> 中选择需要显示的曲线。</p>
<p>但 LTspice 会自动将不同参数的仿真波形同时显示，如果一个 <code>plot pane</code> 内只有一簇曲线（比如一个节点电压或者一个元件的电流），LTspice 显示时会自动着色以区分不同参数，着色顺序按照 <code>plot pane</code> 标题内曲线名称的颜色（<code>Default Color</code>）为起始，依次使用后续定义好的颜色（<code>Setting-&gt;Waveforms-&gt;Color Scheme</code> 中的 <code>Trace V(1)</code> 到 <code>Trace V(12)</code>）。因此，如果保证每个 <code>plot pane</code> 内只有一簇曲线，并且这条曲线的颜色（<code>Default Color</code>）设置相同，那么每个颜色相同的曲线对应的就是同一组参数，便于观察对比。（前提是总仿真数量少于 12 个，否则会出现重复的颜色，一簇曲线内的多组参数的的结果对应同一个颜色。）</p>
<p>此外，使用 <code>Cursor</code> 观察数据时，可以使用方向键的上下切换 <code>Cursor</code>，测量另一个参数下仿真的结果；右击 <code>Cursor</code>，可显示当前 <code>Cursor</code> 测量的仿真结果对应的参数。</p>
<p>在波形图上（<code>.raw</code> 文件浏览窗口）<code>Right Click-&gt;View-&gt;Reset Colors</code>，可使各个波形恢复默认状态，也就是使每簇曲线起始颜色按照 <code>Trace V(1)</code> 到 <code>Trace V(12)</code> 的顺序排列，每簇曲线名称的颜色也按这个顺序排列。但这样就会使每组参数仿真曲线在不同簇内的颜色不对应，一般不使用这个功能。</p>
<p>为了方便观察波形，也可为波形图添加图例，用颜色区分不同参数的仿真结果。在波形图上（<code>.raw</code> 文件浏览窗口）<code>Right Click-&gt;Notes &amp; Annotations-&gt;Annotate Steps</code> 即可。但注意，添加的图例并不会自动刷新，改变波形颜色后图例还是保持原样，有可能反而造成误导。</p>
<h4 id="step-指令下的-meas-测量指令"><code>.step</code> 指令下的 <code>.meas</code> 测量指令</h4>
<p>使用该命令后，<code>.meas</code> 指令会自动对每次仿真结果进行测量，但是测量结果并不是矩阵排列，而是一维数组，需要后处理。</p>
<p>不过 LTspice 也提供了一些简便的观察方法。通过快捷键 <code>Ctrl+L</code> 或者 <code>View-&gt;SPICE Output Log</code> 打开 LTspice 的输出信息窗口（<code>.log</code> 浏览窗口），在这个窗口内 <code>Right Click-&gt;plot .step'ed .meas data</code>，可弹出测量数据的波形观察窗口（<code>.log.raw</code> 文件观察窗口）。</p>
<p>这个窗口可以将 <code>.step</code> 指令下的 <code>.meas</code> 指令测量结果按参数进行绘图。可通过 <code>Plotting Setting-&gt;Add Trace</code> 或者在该窗口内 <code>Right Click-&gt;Add Trace</code> 添加曲线。横坐标为第一条 <code>.step</code> 指令所指定的参数，第二条 <code>.step</code> 指令所指定的参数会以不同颜色做区分。</p>
<p>但遗憾的是，这个窗口内与波形图（<code>.raw</code> 文件浏览窗口）不同，不仅无法添加图例，也无法在 <code>Cursor</code> 上右击以显示仿真参数。这里我建议对每个 <code>.step</code> 指定的参数设置一个 <code>.meas</code> 测量，然后每个 <code>plot pane</code> 内只添加一簇曲线，每簇曲线设置为相同颜色。这样就可通过对 <code>.step</code> 指定参数的曲线确定颜色与参数对应关系，进而获得类似于图例的功能。</p>
<h4 id="温度变化">温度变化</h4>
<p>LTspice 内置变量 <code>temp</code> 代表温度，这个量会对温度敏感的元器件造成影响。自然，<code>.step</code> 指令也可改变这个参数进行仿真，对温度变化进行仿真。</p>
<h4 id="更多阅读">更多阅读</h4>
<p>本文没有配图，以下为其他有配图的教程。<br>
<a href="https://electronic-circuit.com/ltspice-step/">10分でわかるLTspiceでSTEPコマンドを使う方法のまとめ</a></p>
]]></content>
      <tags>
        <tag>电路/仿真软件/LTspice</tag>
      </tags>
  </entry>
</search>
